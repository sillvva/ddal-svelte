@import "tailwindcss";
@config '../tailwind.config.ts';

@variant dark (&:where(.dark, .dark *));

@custom-variant hover-hover {
	@media (hover: hover) {
		@slot;
	}
}
@custom-variant hover-none {
	@media (hover: none) {
		@slot;
	}
}

@theme {
	--breakpoint-xs: 500px;
	--breakpoint-sm: 640px;
	--breakpoint-md: 768px;
	--breakpoint-lg: 1024px;
	--breakpoint-xl: 1280px;
	--breakpoint-2xl: 1440px;
	--font-draconis: "Draconis";
	--font-vecna: "Vecna";

	--color-input-focus: color-mix(in oklch, var(--color-base-content) 30%, transparent);
}

@plugin "daisyui";

@plugin "daisyui/theme" {
	name: "black";
	default: false;
	prefersdark: true;
	color-scheme: dark;

	--color-primary: oklch(48.38% 0.2633 287.85);
	--color-secondary: oklch(72.67% 0.1872 308.45);
	--color-error: oklch(50.54% 0.1905 27.52);
	--color-error-content: oklch(100% 0 0);
	--radius-field: 0.5rem;
	--radius-box: 0.5rem;
	--radius-selector: 0.5rem;
}

@plugin "daisyui/theme" {
	name: "light";
	default: true;
	prefersdark: false;
	color-scheme: light;

	--color-primary: oklch(52.26% 0.2175 262.65);
	--color-secondary: oklch(56.59% 0.238 265.11);
	--color-accent: oklch(52.78% 0 0);
}

@plugin "daisyui/theme" {
	name: "dark";
	default: false;
	prefersdark: false;
	color-scheme: dark;
}

@plugin "daisyui/theme" {
	name: "night";
	default: false;
	prefersdark: false;
	color-scheme: dark;
}

@plugin "daisyui/theme" {
	name: "halloween";
	default: false;
	prefersdark: false;
	color-scheme: dark;

	--color-secondary: oklch(58.8664% 0.104092 60.664655);
	--color-secondary-content: oklch(100% 0 0);
	--color-error: oklch(57.56% 0.1894 37.76);
	--color-error-content: oklch(100% 0 0);
}

@plugin "daisyui/theme" {
	name: "retro";
	default: false;
	prefersdark: false;
	color-scheme: light;

	--color-secondary: oklch(64.38% 0.2633 287.85);
	--color-secondary-content: oklch(100% 0 0);
}

@plugin "daisyui/theme" {
	name: "valentine";
	default: false;
	prefersdark: false;
	color-scheme: light;

	--color-secondary: oklch(48.38% 0.2633 287.85);
}

@plugin "daisyui/theme" {
	name: "garden";
	default: false;
	prefersdark: false;
	color-scheme: light;
}

@layer base {
	* {
		box-sizing: border-box;
		min-width: 0;
	}
	body {
		overflow-x: hidden;
		overflow-y: scroll;
		min-height: 100vh;
	}
}

@layer utilities {
	/**
	 * Fonts
	 */
	@font-face {
		font-family: "Draconis";
		src: url("/fonts/Draconis.ttf") format("truetype");
		font-weight: normal;
		font-style: normal;
		font-display: swap;
	}

	@font-face {
		font-family: "Vecna";
		src: url("/fonts/Vecna.ttf") format("truetype");
		font-weight: normal;
		font-style: normal;
		font-display: swap;
	}

	@font-face {
		font-family: "Vecna";
		src: url("/fonts/VecnaBold.ttf") format("truetype");
		font-weight: bold;
		font-style: normal;
		font-display: swap;
	}

	/**
	 * Animations
	 */
	@keyframes reveal-dark {
		from {
			clip-path: polygon(50% -71%, -50% 71%, -50% 71%, 50% -71%);
		}
		to {
			clip-path: polygon(50% -71%, -50% 71%, 50% 171%, 171% 50%);
		}
	}
}

@utility text-secondary {
	@media print {
		@apply drop-shadow-none;
	}
}

@utility btn {
	.join &:is(.input, .border) {
		border-inline-width: 0;
		&:last-child {
			border-right-width: 1px;
		}
		&:hover:not(.btn-primary, .btn-error) {
			border-color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
		}
	}
}

@utility input {
	&:focus,
	&:focus-within {
		--input-color: var(--color-input-focus);
	}
	&[aria-invalid] {
		@apply input-error;
	}
}

@utility textarea {
	&:focus,
	&:focus-within {
		--input-color: var(--color-input-focus);
	}
	&[aria-invalid] {
		@apply textarea-error;
	}
}

@utility select {
	font-size: var(--text-base);
	&:focus,
	&:focus-within {
		--input-color: var(--color-input-focus);
	}
	&[aria-invalid] {
		@apply select-error;
	}
}

@utility super-debug {
	width: 100%;
}

@utility linked-table {
	tr {
		position: relative;
		a.row-link::before {
			content: "";
			display: block;
			position: absolute;
			inset: 0;
		}
		.interactive {
			position: relative;
			z-index: 1;
		}
	}
}

@utility theme-switcher {
	* {
		view-transition-name: none !important;
	}
	&::view-transition-group(root) {
		will-change: clip-path;
		animation-duration: 0.7s;
		animation-timing-function: linear(
			0 0%,
			0.1684 2.66%,
			0.3165 5.49%,
			0.446 8.52%,
			0.5581 11.78%,
			0.6535 15.29%,
			0.7341 19.11%,
			0.8011 23.3%,
			0.8557 27.93%,
			0.8962 32.68%,
			0.9283 38.01%,
			0.9529 44.08%,
			0.9711 51.14%,
			0.9833 59.06%,
			0.9915 68.74%,
			1 100%
		);
	}
	&::view-transition-old(root) {
		animation: none;
		z-index: -1;
	}
	&::view-transition-new(root) {
		animation-name: reveal-dark;
		will-change: clip-path;
	}
}
